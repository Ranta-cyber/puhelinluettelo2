(this.webpackJsonppuhelinluettelo2=this.webpackJsonppuhelinluettelo2||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),u=n.n(r),c=n(13),o=n.n(c),i=n(3),l=n.n(i),m="/api/persons",d=function(e){return l.a.post(m,e).then((function(e){return e.data}))},f=function(){return l.a.get(m).then((function(e){return e.data}))},s=function(e){return l.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},h=(n(36),function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(a.a)(o,2),l=i[0],m=i[1],h=Object(r.useState)(""),p=Object(a.a)(h,2),v=p[0],E=p[1],w=Object(r.useState)(""),g=Object(a.a)(w,2),O=g[0],j=g[1],y=Object(r.useState)(null),S=Object(a.a)(y,2),k=S[0],N=S[1],C={color:"white",backgroundImage:"url(https://cdn.pixabay.com/photo/2018/04/07/08/28/notepad-3297994_1280.jpg)"},D=function(e){var t=e.message;return null===t?null:u.a.createElement("div",{className:"error"},t)};Object(r.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var I=function(){if(""===O){var e=n.map((function(e,t){return u.a.createElement("li",{key:t,id:t},e.name," ",e.number,u.a.createElement("button",{name:e.number,type:"button",onClick:function(n){return x(n,e.id,t)}}," delete"))}));return u.a.createElement("ul",{id:"choiceList"},e)}var t=L(n,O).map((function(e,t){return u.a.createElement("li",{key:t,id:t},e.name," ",e.number,u.a.createElement("button",{name:e.number,type:"button",onClick:function(n){return x(n,e.id,t)}}," delete"))}));return u.a.createElement("ul",{id:"choiceList"},t)},x=function(e,t,a){e.preventDefault(),b(t).then((function(e){N("Note '".concat(n[0].name,"' is removed from server")),setTimeout((function(){N(null)}),5e3),c(n.filter((function(e){return e.id!==t})))})).catch((function(e){N("Note '".concat(n[a].name,"' was already removed from server")),setTimeout((function(){N(null)}),5e3)})).finally()},L=function(e,t){return e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}))};return u.a.createElement("div",{style:C},u.a.createElement("h2",null,"Phonebook"),u.a.createElement(D,{message:k}),u.a.createElement("div",null,"Filter shown with: ",u.a.createElement("input",{value:O,onChange:function(e){e.preventDefault(),j(e.target.value)}})),u.a.createElement("h3",null,"Add a new"),u.a.createElement("div",null,u.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n.findIndex((function(e){return e.name===l}));if(t<0){var a={name:l,number:v,date:(new Date).toISOString()};d(a).then((function(e){c(n.concat(e)),m(""),E("")}),N("Note '".concat(l,"' is added.")),setTimeout((function(){N(null)}),5e3))}else if(!0===window.confirm("".concat(l," is already added to phonebook, \nreplace the old number with a new one?"))){var r=L(n,l),u={name:l,number:v,date:(new Date).toISOString(),id:r[0].id};console.log("newname,newnumber,id:",l,v,r[0].id),s(u).then((function(e){return N("Note '".concat(u.name,"' is updated."))}),setTimeout((function(){N(null)}),5e3),n[t].number=v).catch((function(e){alert("the note '".concat(u.name,"' was already deleted from server")),c(n.filter((function(e){return e.id!==u.id})))})),m(""),E("")}}},u.a.createElement("div",null,"Name: ",u.a.createElement("input",{value:l,onChange:function(e){e.preventDefault(),m(e.target.value)}})),u.a.createElement("div",null,"Number: ",u.a.createElement("input",{value:v,onChange:function(e){e.preventDefault(),E(e.target.value)}})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))),u.a.createElement("h3",null,"Numbers"),u.a.createElement(I,{newrajaus:O,ihmiset:n}))});o.a.render(u.a.createElement(h,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.09871030.chunk.js.map